# 最后一周总结
## 题目
### 1. 毕业项目
对当下自己的项目总的业务，进行一个微服务改造，需要考虑入校技术点：
1）微服务架构（BFF、Service、Admin、Job、Task分模块）
2）API设计（包括API定义、错误码规范、Error的使用）
3）gRPC的使用
4）Go项目工程化（项目结构、DI、代码分层、ORM框架）
5）并发的使用（errgroup的并行链路请求）
6）微服务中间件的使用（ELK、Opentracing、Prometheus、Kafka）
7）缓存的优化（一致性处理、pipeline优化）

### 2. 毕业总结
毕业总结写在README文件里即可，可以写一下本学期的学习体会、或者学习方法、自我总结都可以
要求将毕业项目的总计额，提交到Github上表面，毕业项目提交地址：
。。。。。。

## 作答
### 1. 毕业项目
前年年底到去年年中，我确实对当时手上的一个项目做过微服务改造。这个作业就当是把当时的那个项目改成Golang再实现一次吧。
1. Api设计的改变以及gRPC的使用：
  - 统一加入gRPC支持，原有json格式支持尽量保持不变
  - api的输入输出样式在设计时确定下来，作为前端、后端和测试人员工作的输入文档
  - 明确ErrorCode，包括格式与内容，方便确定如何处理降级
  - 使用errWrap，让错误在服务的顶层抛出，并携带底层的错误栈，方便开发、测试人员查找问题更远
2. 微服务架构
  - 原有的BFF主要职责是对接公司现有的两个用户认证和权限项目的，为了避免被两个外部项目挤压，并将一些不必要的组件引入项目，BFF实际承担了防腐层的职责。所以改造过程先回给原有的BFF项目改名为ACL。
  - 创建新的BFF，负责解构原有的服务。解耦后的微服务应当更易于管理和维护。
  - 引入服务发现职责，原有的简单配置表方式真的非常麻烦，而且容易出错。
3. 项目工程化
  - 因为还要过审，所以原有的目录名称不能改变（可惜，先这么用吧）
  - 增加一个cmd相关的指令，用于存放自动化处理常见的命令行操作场景
4. 并发使用
  - 使用errGroup管理程序启动与停止操作
5. 中间件的使用
  - 如果有已经可以解决现有问题的中间件，一定要花些时间来学习，可以快速提升项目能力。
  - ELK已经投入使用了，测试人员已经可以独立通过分析日志查找软件缺陷。
  - Prometheus的能力还在测试中，估计很快也可以加入到现有的系统中，继续解放部分开发人员、
  - Kafka的能力也在尝试中，预计会在之后的某个时间点替换现有的RabbitMQ。
6. 缓存优化
  - 随着项目的需求收敛和性能调优，缓存的优化场景已经开始大量出现。
  - 随着更多层与微服务的加入，项目整体上正变的越来越复杂。pipeline的优化确实需要。
  - 缓存预热问题确实需要重视。
7. 还有些思考
  - 尽快使用 docker & k8s 取代现有的linux虚机，相比起b站，我做的项目真土。
  - 墨菲定律中的”Anything can go wrong, will go wrong“得到再一次诠释，吸取教训。
  - 微服务的铺开需要IT环境具备一定的支持能力。

### 2. 毕业总结
本次参加Go训练营，原本只是打算好好学习一个新的语言，没想到不但学习了语言，还学习附送的架构师课程，还了解了顶级开发者是如何进阶和解决实际问题的，还顺便了解了不少职场哲学问题。绝对超值啊。相比起来，最初的学习语言的初衷，可能已经不那么重要了，后面的三个内容才是更具价值的内容。
记得第一节课就是微服务相关的讲解，最后的毕业作业是去微服务改造一个项目，正巧前年年底到去年年中，我确实对当时手上的项目做过微服务改造，由于有一些相关的经验和思考，所以在听毛大的讲解时，感觉格外真实。
虽然现在我已经离开了这个项目，老师教授的内容也没能直接提升这个项目质量或者解决什么具体问题。但是通过这13周的学习，我有理由相信，我已经拿到了一根更好的“鱼竿”，可以钓到跟大更好的🐟。